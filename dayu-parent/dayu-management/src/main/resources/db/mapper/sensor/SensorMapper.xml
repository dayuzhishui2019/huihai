<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dayu.management.module.sensor.mapper.SensorMapper">


    <insert id="insert" parameterType="com.dayu.management.module.sensor.model.Sensor">
        insert into sensor (id,gid,name,address,areaNumber,dominionCode,type,subType,deriveId)
        values
        <foreach collection="list" item="item" open="(" close=")" separator=",">
            #{item.id},#{item.gid},#{item.name},#{item.address},#{item.areaNumber},#{item.dominionCode},#{item.type},#{item.subType},#{item.deriveId}
        </foreach>;
    </insert>

    <update id="update" parameterType="com.dayu.management.module.sensor.model.Sensor">
        <foreach collection="list" item="item">
            update
            sensor
            <trim suffix=",">
                <if test="item.gid!=null and item.gid!=''">
                    set gid=#{item.gid},
                </if>
                <if test="item.name!=null and item.name!=''">
                    set name=#{item.name},
                </if>
                <if test="item.address!=null and item.address!=''">
                    set address=#{item.address},
                </if>
                <if test="item.areaNumber!=null and item.areaNumber!=''">
                    set areaNumber=#{item.areaNumber},
                </if>
                <if test="item.dominionCode!=null and item.dominionCode!=''">
                    set dominionCode=#{item.dominionCode},
                </if>
                <if test="item.type!=0">
                    set type=#{item.type},
                </if>
                <if test="item.subType!=0">
                    set subType=#{item.subType},
                </if>
            </trim>
            where 1=1 and id=#{id}
        </foreach>
    </update>

    <delete id="delete" parameterType="java.lang.String">
        delete from sensor where id in
        <foreach collection="list" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
    </delete>

    <select id="select" parameterType="com.dayu.management.module.sensor.model.query.SensorQuery">
        select
        id,
        gid,
        name,
        areaNumber,
        dominionCode,
        type,
        subType,
        deriveId
        from
        sensor
        where 1=1
        <if test="name!=null and name!=''">
            and name like "%name%"
        </if>
        <if test="type!=0">
            and type=#{type}
        </if>
        <if test="subType!=0">
            and subType=#{subType}
        </if>
        <if test="areaNumber!=0">
            and areaNumber=#{areaNumber}
        </if>
        <if test="dominionCode!=0">
            and dominionCode=#{dominionCode}
        </if>
        limit #{size} offset #{start} * #{size}
    </select>

</mapper>